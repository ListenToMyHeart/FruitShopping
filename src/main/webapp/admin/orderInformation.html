<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>订单详细信息</title>
    <link type="text/css" rel="stylesheet" href="../css/themes/insdep/easyui.css">
    <script type="text/javascript" src="../js/jquery1.9.1.js"></script>
    <script type="text/javascript" src="../js/jquery.easyui-1.5.1.min.js"></script>
    <script type="text/javascript" src="../js/easyui-lang-zh_CN.js"></script>
    <script type="text/javascript" src="../js/util.js"></script>
    <style>
        label {
            display: inline-block;
            width: 81px;
            margin-left: 10px;
        }
        .form-div{
            margin-left: 20px;
            margin-bottom: 20px;
        }
        .button-div{
            margin-left:300px;
            margin-bottom: 20px;
        }
        .label-width{
            margin-left: 80px;
        }
        .panel-body-noheader{
            max-height:198px;
            height:auto !important;
        }
        .mm{
            width: 120px !important;
        }
    </style>
</head>

<body>
<form  style="margin-top: 20px" id="addstudent" method="post">
    <div class="form-div">
        <label>订单号</label>
        <input class="easyui-textbox" type="text" id="orderid" data-options="editable:false" />
        <label class="label-width">商品名称</label>
        <input class="easyui-textbox" type="text" id="goodsid" data-options="editable:false" />
    </div>
    <div class="form-div">
        <label>单价</label>
        <input class="easyui-textbox" type="text" id="goodsprice" data-options="editable:false" />
        <label class="label-width">重量</label>
        <input class="easyui-textbox" type="text" id="goodsweight" data-options="editable:false" />
    </div>
    <div class="form-div">
        <label>总价格</label>
        <input class="easyui-textbox" type="text" id="totalprice" data-options="editable:false" />
        <label class="label-width">是否付款</label>
        <input class="easyui-textbox" type="text" id="ispay" data-options="editable:false" />
    </div>
    <div class="form-div">
        <label>订货人</label>
        <input class="easyui-textbox" type="text" id="memberid" data-options="editable:false" />
        <label class="label-width">收货人</label>
        <input class="easyui-textbox" type="text" id="receivername" data-options="editable:false" />

    </div>
    <div class="form-div">
        <label>收货人地址</label>
        <input class="easyui-textbox" type="text" id="receiveraddr" data-options="editable:false" />
        <label class="label-width">收货人电话</label>
        <input class="easyui-textbox" type="text" id="receiverphone" data-options="editable:false" />
    </div>
    <div class="form-div">
        <label>订货时间</label>
        <input class="easyui-textbox" type="text" id="orderdate" data-options="editable:false" />
        <label class="label-width">货物状态</label>
        <input class="easyui-textbox" type="text" id="status" data-options="editable:false" />
    </div>
    </div>
</form>
<div class="button-div" > <a class="easyui-linkbutton button-blue" onclick="receiveIt()">接受</a></div>
<script>
    $(function(){
        show(requestParam("keyword"));
    });
    function show(keyword) {
        $.ajax({
            url:getContextPath()+"orderInformation/searchById/"+keyword,
            type:'get',
            dataType:'json',
            success:function (data) {
                var jsondata=data.orderInformation;
                $('#orderid').textbox('setValue',jsondata.orderid);
                $("#goodsid").textbox('setValue',jsondata.goodsid);
                $('#goodsprice').textbox('setValue',jsondata.goodsprice);
                $('#goodsweight').textbox('setValue',jsondata.isconfirm);
                $('#totalprice').textbox('setValue',jsondata.totalprice);
                $('#ispay').textbox('setValue',jsondata.ispayment);
                $('#memberid').textbox('setValue',jsondata.memberid);
                $('#receivername').textbox('setValue',jsondata.receivername);
                $('#receiveraddr').textbox('setValue',jsondata.receiveraddress);
                $('#receiverphone').textbox('setValue',jsondata.receiverphone);
                $('#orderdate').textbox('setValue',jsondata.orderdate);
                $('#status').textbox('setValue',jsondata.status);
            }
        })
    }
    function receiveIt() {
        var orderid=$('#orderid').val();
        var jsondata={status:"未发货"};
        $.ajax({
            url:getContextPath()+"orderInformation/modifyStatusToReceived/"+orderid,
            type:'post',
            contentType: "application/json",
            dataType: "json",
            data:JSON.stringify(jsondata),
            success:function () {
               /* window.location.href=getContextPath()+"admin/orderInformation.html?keyword="+orderid;*/
               show(orderid);
                alert("订单接收成功");
            }
        })
    }
</script>
</body>
</html>