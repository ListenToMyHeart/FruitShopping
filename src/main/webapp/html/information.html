<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=0">
		<title>个人资料</title>
		<link type="text/css" rel="stylesheet" href="../css/themes/insdep/easyui.css">
		<link href="../css/admin.css" rel="stylesheet" type="text/css">
		<link href="../css/amazeui.css" rel="stylesheet" type="text/css">
		<link href="../css/personal.css" rel="stylesheet" type="text/css">
		<link href="../css/infstyle.css" rel="stylesheet" type="text/css">
		<script src="../js/jquery.min.js"></script>
		<script src="../js/amazeui.js"></script>
		<script type="text/javascript" src="../js/jquery.easyui-1.5.1.min.js"></script>
		<script type="text/javascript" src="../js/easyui-lang-zh_CN.js"></script>
		<script type="text/javascript" src="../js/util.js"></script>

		<style>
			.input-marginleft{
				margin-left: 30px;
			}
		</style>

	</head>

	<body>
		<!--头 -->
		<!--<div class="center">
			<div class="col-main">
				<div class="main-wrap">-->

					<div class="user-info input-marginleft">
						<!--标题 -->
						<div class="am-cf am-padding">
							<div class="am-fl am-cf"><strong class="am-text-danger am-text-lg">个人资料</strong> / <small>Personal&nbsp;information</small></div>
						</div>
						<hr/>

						<!--头像 -->
						<!--<div class="user-infoPic">

							<div class="filePic">
								<input type="file" class="inputPic" allowexts="gif,jpeg,jpg,png,bmp" accept="image/*">
								<img class="am-circle am-img-thumbnail" src="../images/getAvatar.do.jpg" alt="" />
							</div>
							<p class="am-form-help">头像</p>
							<div class="info-m">
								<div><b>用户名：<i>小叮当</i></b></div>
								<div class="vip">
                                      <span></span><a href="#">会员专享</a>
								</div>
							</div>
						</div>-->

						<!--个人信息 -->
						<div class="info-main">
							<form class="am-form am-form-horizontal">
								<div class="am-form-group">
									<label for="username" class="am-form-label">姓名</label>
									<div class="am-form-content">
										<input type="text" id="username" placeholder="name">
									</div>
								</div>

								<div class="am-form-group">
									<label class="am-form-label">性别</label>
									<div class="am-form-content sex">
										<label class="am-radio-inline">
											<input type="radio" id="sex" name="sex" value="男" > 男
										</label>
										<label class="am-radio-inline">
											<input type="radio" id="sex" name="sex" value="女" > 女
										</label>
										<label class="am-radio-inline">
											<input type="radio" id="sex" name="sex" value="保密" > 保密
										</label>
									</div>
								</div>
<!--
								<div class="am-form-group">
									<label class="am-form-label">生日</label>
									&lt;!&ndash;<div class="am-form-content birth">
										<div class="birth-select">
											<select data-am-selected>
												<option value="a">2015</option>
												<option value="b">1987</option>
											</select>
											<em>年</em>
										</div>
										<div class="birth-select2">
											<select data-am-selected>
												<option value="a">12</option>
												<option value="b">8</option>
											</select>
											<em>月</em></div>
										<div class="birth-select2">
											<select data-am-selected>
												<option value="a">21</option>
												<option value="b">23</option>
											</select>
											<em>日</em></div>
									</div>&ndash;&gt;
									<div class="am-form-content birth">
										<input class="easyui-datebox" id="birthday" name="birthday" />
									</div>
								</div>-->


								<div class="am-form-group">
									<label for="city" class="am-form-label">所在城市</label>
									<div class="am-form-content">
										<input type="text" id="city" placeholder="所在城市">
									</div>
								</div>

								<div class="am-form-group">
									<label for="advancepayment" class="am-form-label">账户余额</label>
									<div class="am-form-content">
										<input class="easyui-textbox" id="advancepayment" data-options="editable:false" >
									</div>
								</div>

								<div class="am-form-group">
									<label for="phone" class="am-form-label">电话</label>
									<div class="am-form-content">
										<input id="phone" placeholder="telephonenumber" type="tel">
									</div>
								</div>
								<div class="am-form-group">
									<label for="email" class="am-form-label">电子邮件</label>
									<div class="am-form-content">
										<input id="email" placeholder="Email" type="email" >

									</div>
								</div>
								<div class="am-form-group address">
									<label class="am-form-label">收货地址</label>
									<div class="am-form-content address">
										<a href="address.html">
											<p class="new-mu_l2cw">
												<span class="province">湖北</span>省
												<span class="city">武汉</span>市
												<span class="dist">洪山</span>区
												<span class="street">雄楚大道666号(中南财经政法大学)</span>
												<span class="am-icon-angle-right"></span>
											</p>
										</a>

									</div>
								</div>
								<div class="am-form-group safety">
									<label class="am-form-label">账号安全</label>
									<div class="am-form-content safety">
										<a href="safety.html">
											<span class="am-icon-angle-right"></span>
										</a>
									</div>
								</div>
								<div class="info-btn">
									<div class="am-btn am-btn-danger" onclick="save()">保存修改</div>
								</div>

							</form>
						</div>

					</div>

		<!--		</div>
				&lt;!&ndash;底部&ndash;&gt;
			</div>


		</div>-->

	<script>
		$(function () {
			show();
		});

		function show() {
			$.ajax({
				url:getContextPath()+'members/searchByMemberid',
				type:'get',
				dataType:'json',
				success:function (data) {
					var jsondata=data.member[0];
					if(jsondata.memberid!=null)
					{
						$('#username').val(jsondata.truename);
						$('input[name="sex"][value="'+jsondata.sex+'"]').attr("checked",true);
						$('#city').val(jsondata.city);
						$('#phone').val(jsondata.phone);
						$('#email').val(jsondata.email);
						$('#advancepayment').textbox('setValue',jsondata.advancepayment);
					}
				}
			})
		}

		function save(){
			var username=$('#username').val();
			var sex=$('input[name="sex"]:checked').val();
			var city=$('#city').val();
			var phone=$('#phone').val();
			var email=$('#email').val();
			var jsondata={truename:username,sex:sex,city:city,phone:phone,email:email};
			$.ajax({
				url:getContextPath()+"members/updateByMemberid",
				type:'post',
				contentType:'application/json',
				dataType:'json',
				data:JSON.stringify(jsondata),
				success:function (data) {
					if(data.success){
						alert("修改成功");
					}
					else{
						alert("修改失败");
					}
				}
			})

		}
	</script>

	</body>

</html>